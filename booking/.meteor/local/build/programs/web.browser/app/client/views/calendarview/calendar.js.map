{"version":3,"sources":["meteor://ðŸ’»app/client/views/calendarview/calendar.js"],"names":[],"mappings":"yBAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,G","file":"/client/views/calendarview/calendar.js","sourcesContent":["Template.calendar.helpers({\n\tdateString: function() {\n\t\treturn moment(Session.get(\"calendarStart\")).format(\"MMMM YYYY\");\n\t},\n\tprevmonth: function() {\n\t\treturn moment(Session.get(\"calendarStart\")).subtract(1, \"month\").format(\"MMMM\")\n\t},\n\tnextmonth: function() {\n\t\treturn moment(Session.get(\"calendarStart\")).add(1, \"month\").format(\"MMMM\")\n\t},\n});\n\nTemplate.calendar.rendered = function() {\n\tvar currentView = $(\"#innercalendar\").fullCalendar(\"getView\");\n\t$(\"#innercalendar\").fullCalendar('gotoDate', Session.get(\"calendarStart\"));\n\t\n\tTracker.autorun(function() {\n\t\ttry {\n\t\t\tif (Router.current().route.getName() == \"calendar\") {\n\t\t\t\t$('#innercalendar').fullCalendar(\"removeEvents\");\n\t\t\t\tconsole.log(\"populating calendar - \" + unusualDays.find().count());\n\t\t\t\tvar containingObject = { events: []};\n\t\t\t\t_.forEach(unusualDays.find().fetch(), function(day) {\n\t\t\t\t\tvar title =  \"Cab Booked!\";\n\t\t\t\t\tif (typeof day.notes !== \"undefined\") {\n\t\t\t\t\t\ttitle = title + \" \\n\" + day.notes;\n\t\t\t\t\t}\n\t\t\t\t\tcontainingObject.events.push({title:title, start: day.date, allDay: true })\n\t\t\t\t});\n\t\t\t\t$('#innercalendar').fullCalendar(\"addEventSource\", containingObject)\n\t\t\t}\n\t\t}\n\t\tcatch (e) {\n\t\t\tconsole.error(\"caught error while populating calendar\");\n\t\t\tconsole.log(e);\n\t\t}\n\n\t});\n\n};\nTemplate.calendar.events({\n\t'viewRender #innercalendar': function(event, view, element) {\n\t\tconsole.log('meteor event triggered');\n\t\tconsole.log(view.start);\n\t},\n\t'click div#nextMonth button': function(event) {\n\t\tevent.stopImmediatePropagation();\n\t\tvar newdate = moment(Session.get(\"date\")).add(1, \"month\");\n\t\tRouter.go(\"/calendar/\"+newdate.format(\"YYYY\")+\"/\"+newdate.format(\"MMMM\"))\n\t},\n\t'click div#prevMonth button': function(event) {\n\t\tevent.stopImmediatePropagation();\n\t\tvar newdate = moment(Session.get(\"date\")).subtract(1, \"month\");\n\t\tRouter.go(\"/calendar/\"+newdate.format(\"YYYY\")+\"/\"+newdate.format(\"MMMM\"))\n\t},\n});"]}